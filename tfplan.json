{"format_version":"1.1","terraform_version":"1.2.1","variables":{"access_key":{"value":""},"ami":{"value":"ami-07336266b2c69c546"},"env":{"value":"masa-demo"},"region":{"value":"us-west-1"},"s3_acl":{"value":"public-read-write"},"secret_key":{"value":""}},"planned_values":{"root_module":{"resources":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allow_users_to_change_password":true,"max_password_age":3,"minimum_password_length":8},"sensitive_values":{}}],"child_modules":[{"resources":[{"address":"module.iam.aws_iam_role.snyk-admin-role","mode":"managed","type":"aws_iam_role","name":"snyk-admin-role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"snyk_masa-demo_role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}],"address":"module.iam"},{"resources":[{"address":"module.instance.aws_instance.this[0]","mode":"managed","type":"aws_instance","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-07336266b2c69c546","credit_specification":[{"cpu_credits":null}],"enclave_options":[{}],"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t2.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"source_dest_check":true,"tags":{"Environment":"masa-demo","Name":"example-server","Terraform":"true"},"tags_all":{"Environment":"masa-demo","Name":"example-server","Terraform":"true"},"timeouts":{"create":null,"delete":null,"update":null},"user_data_replace_on_change":false,"volume_tags":{"Name":"example-server"}},"sensitive_values":{"capacity_reservation_specification":[],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"timeouts":{},"volume_tags":{},"vpc_security_group_ids":[]}}],"address":"module.instance"},{"resources":[{"address":"module.storage.aws_db_instance.snyk_db","mode":"managed","type":"aws_db_instance","name":"snyk_db","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"allocated_storage":20,"allow_major_version_upgrade":null,"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"customer_owned_ip_enabled":null,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_iam_role_name":null,"enabled_cloudwatch_logs_exports":null,"engine":"postgres","engine_version":"10.20","final_snapshot_identifier":"snyk-db-masa-demo-db-destroy-snapshot","iam_database_authentication_enabled":null,"identifier":"snyk-db-masa-demo","instance_class":"db.t3.micro","iops":null,"max_allocated_storage":null,"monitoring_interval":0,"name":"snyk_db_masa-demo","password":"supersecret","performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"security_group_names":null,"skip_final_snapshot":true,"storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"snyk_db_masa-demo"},"tags_all":{"Name":"snyk_db_masa-demo"},"timeouts":null,"username":"snyk"},"sensitive_values":{"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.storage.aws_db_subnet_group.snyk_rds_subnet_grp","mode":"managed","type":"aws_db_subnet_group","name":"snyk_rds_subnet_grp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","name":"snyk_rds_subnet_grp_masa-demo","tags":{"Name":"snyk_rds_subnet_grp_masa-demo"},"tags_all":{"Name":"snyk_rds_subnet_grp_masa-demo"}},"sensitive_values":{"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"module.storage.aws_kms_key.snyk_db_kms_key","mode":"managed","type":"aws_kms_key","name":"snyk_db_kms_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance masa-demo","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Name":"snyk_db_kms_key_masa-demo"},"tags_all":{"Name":"snyk_db_kms_key_masa-demo"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.storage.aws_s3_bucket.my-new-undeployed-bucket","mode":"managed","type":"aws_s3_bucket","name":"my-new-undeployed-bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"snyk-public-masa-demo-demo","bucket_prefix":null,"force_destroy":false,"tags":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"module.storage.aws_s3_bucket.snyk_storage","mode":"managed","type":"aws_s3_bucket","name":"snyk_storage","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"snyk-storage-masa-demo-demo","bucket_prefix":null,"force_destroy":false,"tags":{"name":"snyk_blob_storage_masa-demo"},"tags_all":{"name":"snyk_blob_storage_masa-demo"}},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}},{"address":"module.storage.aws_s3_bucket_public_access_block.snyk_private","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"snyk_private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":false},"sensitive_values":{}},{"address":"module.storage.aws_s3_bucket_public_access_block.snyk_public","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"snyk_public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":false,"block_public_policy":false,"ignore_public_acls":false,"restrict_public_buckets":false},"sensitive_values":{}},{"address":"module.storage.aws_security_group.snyk_rds_sg","mode":"managed","type":"aws_security_group","name":"snyk_rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"snyk_rds_sg","revoke_rules_on_delete":false,"tags":{"Name":"snyk_rds_sg_masa-demo"},"tags_all":{"Name":"snyk_rds_sg_masa-demo"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.storage.aws_ssm_parameter.snyk_ssm_db_host","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":"Snyk Database","name":"/snyk-masa-demo/DB_HOST","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString"},"sensitive_values":{"tags_all":{}}},{"address":"module.storage.aws_ssm_parameter.snyk_ssm_db_name","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_name","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":"Snyk Database Name","name":"/snyk-masa-demo/DB_NAME","overwrite":null,"tags":{"environment":"masa-demo"},"tags_all":{"environment":"masa-demo"},"tier":"Standard","type":"SecureString","value":"snyk_db_masa-demo"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.storage.aws_ssm_parameter.snyk_ssm_db_password","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_password","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":"Snyk Database Password","name":"/snyk-masa-demo/DB_PASSWORD","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString","value":"supersecret"},"sensitive_values":{"tags_all":{},"value":true}},{"address":"module.storage.aws_ssm_parameter.snyk_ssm_db_user","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_user","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":"Snyk Database Username","name":"/snyk-masa-demo/DB_USER","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString","value":"snyk"},"sensitive_values":{"tags_all":{}}}],"address":"module.storage"},{"resources":[{"address":"module.subnet.aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1a","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.subnet.aws_subnet.secondary","mode":"managed","type":"aws_subnet","name":"secondary","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1c","cidr_block":"10.0.64.0/19","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.subnet"},{"resources":[{"address":"module.vpc.aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"revoke_rules_on_delete":false,"tags":null},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}},{"address":"module.vpc.aws_security_group.allow_ssh","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow SSH inbound from anywhere","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}},{"address":"module.vpc.aws_security_group.allow_ssh_with_valid_cidr","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow SSH inbound from specific range","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}},{"address":"module.vpc.aws_vpc.example","mode":"managed","type":"aws_vpc","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":null},"sensitive_values":{"tags_all":{}}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allow_users_to_change_password":true,"max_password_age":3,"minimum_password_length":8},"after_unknown":{"expire_passwords":true,"hard_expiry":true,"id":true,"password_reuse_prevention":true,"require_lowercase_characters":true,"require_numbers":true,"require_symbols":true,"require_uppercase_characters":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam.aws_iam_role.snyk-admin-role","module_address":"module.iam","mode":"managed","type":"aws_iam_role","name":"snyk-admin-role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"snyk_masa-demo_role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.instance.aws_instance.this[0]","module_address":"module.instance","mode":"managed","type":"aws_instance","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-07336266b2c69c546","credit_specification":[{"cpu_credits":null}],"enclave_options":[{}],"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t2.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"source_dest_check":true,"tags":{"Environment":"masa-demo","Name":"example-server","Terraform":"true"},"tags_all":{"Environment":"masa-demo","Name":"example-server","Terraform":"true"},"timeouts":{"create":null,"delete":null,"update":null},"user_data_replace_on_change":false,"volume_tags":{"Name":"example-server"}},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[{}],"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enclave_options":[{"enabled":true}],"ephemeral_block_device":true,"host_id":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"launch_template":[],"maintenance_options":true,"metadata_options":[{}],"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"timeouts":{},"user_data":true,"user_data_base64":true,"volume_tags":{},"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"timeouts":{},"volume_tags":{},"vpc_security_group_ids":[]}}},{"address":"module.storage.aws_db_instance.snyk_db","module_address":"module.storage","mode":"managed","type":"aws_db_instance","name":"snyk_db","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":20,"allow_major_version_upgrade":null,"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"customer_owned_ip_enabled":null,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_iam_role_name":null,"enabled_cloudwatch_logs_exports":null,"engine":"postgres","engine_version":"10.20","final_snapshot_identifier":"snyk-db-masa-demo-db-destroy-snapshot","iam_database_authentication_enabled":null,"identifier":"snyk-db-masa-demo","instance_class":"db.t3.micro","iops":null,"max_allocated_storage":null,"monitoring_interval":0,"name":"snyk_db_masa-demo","password":"supersecret","performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"security_group_names":null,"skip_final_snapshot":true,"storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"snyk_db_masa-demo"},"tags_all":{"Name":"snyk_db_masa-demo"},"timeouts":null,"username":"snyk"},"after_unknown":{"address":true,"apply_immediately":true,"arn":true,"availability_zone":true,"backup_retention_period":true,"backup_window":true,"ca_cert_identifier":true,"character_set_name":true,"db_name":true,"db_subnet_group_name":true,"endpoint":true,"engine_version_actual":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"kms_key_id":true,"latest_restorable_time":true,"license_model":true,"maintenance_window":true,"monitoring_role_arn":true,"multi_az":true,"nchar_character_set_name":true,"option_group_name":true,"parameter_group_name":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replica_mode":true,"replicas":true,"resource_id":true,"restore_to_point_in_time":[],"s3_import":[],"snapshot_identifier":true,"status":true,"tags":{},"tags_all":{},"timezone":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.storage.aws_db_subnet_group.snyk_rds_subnet_grp","module_address":"module.storage","mode":"managed","type":"aws_db_subnet_group","name":"snyk_rds_subnet_grp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"snyk_rds_subnet_grp_masa-demo","tags":{"Name":"snyk_rds_subnet_grp_masa-demo"},"tags_all":{"Name":"snyk_rds_subnet_grp_masa-demo"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.storage.aws_kms_key.snyk_db_kms_key","module_address":"module.storage","mode":"managed","type":"aws_kms_key","name":"snyk_db_kms_key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance masa-demo","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Name":"snyk_db_kms_key_masa-demo"},"tags_all":{"Name":"snyk_db_kms_key_masa-demo"}},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"policy":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.storage.aws_s3_bucket.my-new-undeployed-bucket","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"my-new-undeployed-bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"snyk-public-masa-demo-demo","bucket_prefix":null,"force_destroy":false,"tags":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.storage.aws_s3_bucket.snyk_storage","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"snyk_storage","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"snyk-storage-masa-demo-demo","bucket_prefix":null,"force_destroy":false,"tags":{"name":"snyk_blob_storage_masa-demo"},"tags_all":{"name":"snyk_blob_storage_masa-demo"}},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags":{},"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.storage.aws_s3_bucket_public_access_block.snyk_private","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"snyk_private","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":false},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.storage.aws_s3_bucket_public_access_block.snyk_public","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"snyk_public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":false,"block_public_policy":false,"ignore_public_acls":false,"restrict_public_buckets":false},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.storage.aws_security_group.snyk_rds_sg","module_address":"module.storage","mode":"managed","type":"aws_security_group","name":"snyk_rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"snyk_rds_sg","revoke_rules_on_delete":false,"tags":{"Name":"snyk_rds_sg_masa-demo"},"tags_all":{"Name":"snyk_rds_sg_masa-demo"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.storage.aws_ssm_parameter.snyk_ssm_db_host","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_host","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":"Snyk Database","name":"/snyk-masa-demo/DB_HOST","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString"},"after_unknown":{"arn":true,"data_type":true,"id":true,"key_id":true,"tags_all":true,"value":true,"version":true},"before_sensitive":false,"after_sensitive":{"tags_all":{},"value":true}}},{"address":"module.storage.aws_ssm_parameter.snyk_ssm_db_name","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_name","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":"Snyk Database Name","name":"/snyk-masa-demo/DB_NAME","overwrite":null,"tags":{"environment":"masa-demo"},"tags_all":{"environment":"masa-demo"},"tier":"Standard","type":"SecureString","value":"snyk_db_masa-demo"},"after_unknown":{"arn":true,"data_type":true,"id":true,"key_id":true,"tags":{},"tags_all":{},"version":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{},"value":true}}},{"address":"module.storage.aws_ssm_parameter.snyk_ssm_db_password","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_password","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":"Snyk Database Password","name":"/snyk-masa-demo/DB_PASSWORD","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString","value":"supersecret"},"after_unknown":{"arn":true,"data_type":true,"id":true,"key_id":true,"tags_all":true,"version":true},"before_sensitive":false,"after_sensitive":{"tags_all":{},"value":true}}},{"address":"module.storage.aws_ssm_parameter.snyk_ssm_db_user","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_user","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":"Snyk Database Username","name":"/snyk-masa-demo/DB_USER","overwrite":null,"tags":null,"tier":"Standard","type":"SecureString","value":"snyk"},"after_unknown":{"arn":true,"data_type":true,"id":true,"key_id":true,"tags_all":true,"version":true},"before_sensitive":false,"after_sensitive":{"tags_all":{},"value":true}}},{"address":"module.subnet.aws_subnet.main","module_address":"module.subnet","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1a","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.subnet.aws_subnet.secondary","module_address":"module.subnet","mode":"managed","type":"aws_subnet","name":"secondary","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1c","cidr_block":"10.0.64.0/19","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_default_security_group.default","module_address":"module.vpc","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"revoke_rules_on_delete":false,"tags":null},"after_unknown":{"arn":true,"description":true,"egress":true,"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name":true,"owner_id":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}},{"address":"module.vpc.aws_security_group.allow_ssh","module_address":"module.vpc","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow SSH inbound from anywhere","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}},{"address":"module.vpc.aws_security_group.allow_ssh_with_valid_cidr","module_address":"module.vpc","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow SSH inbound from specific range","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}},{"address":"module.vpc.aws_vpc.example","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":null},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"enable_dns_hostnames":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.2.1","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.iam.data.aws_iam_policy_document.admin-assume-role-policy","mode":"data","type":"aws_iam_policy_document","name":"admin-assume-role-policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"784443208","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}}],"address":"module.iam"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","expressions":{"region":{"references":["var.region"]},"skip_credentials_validation":{"constant_value":true},"skip_metadata_api_check":{"constant_value":true},"skip_requesting_account_id":{"constant_value":true}}}},"root_module":{"resources":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_config_key":"aws","expressions":{"max_password_age":{"constant_value":3},"minimum_password_length":{"constant_value":8}},"schema_version":0}],"module_calls":{"iam":{"source":"./modules/iam","expressions":{"environment":{"references":["var.env"]}},"module":{"resources":[{"address":"aws_iam_role.snyk-admin-role","mode":"managed","type":"aws_iam_role","name":"snyk-admin-role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.admin-assume-role-policy.json","data.aws_iam_policy_document.admin-assume-role-policy"]},"managed_policy_arns":{"constant_value":[]},"name":{"references":["var.environment"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.admin-assume-role-policy","mode":"data","type":"aws_iam_policy_document","name":"admin-assume-role-policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["*"]},"resources":{"constant_value":["*"]}}]},"schema_version":0}],"variables":{"environment":{"description":"the type of environment (dev,staging/prod)"}}}},"instance":{"source":"terraform-aws-modules/ec2-instance/aws","expressions":{"ami":{"references":["var.ami"]},"instance_type":{"constant_value":"t2.micro"},"name":{"constant_value":"example-server"},"subnet_id":{"references":["module.subnet.subnet_id_main","module.subnet"]},"tags":{"references":["var.env"]},"vpc_security_group_ids":{"references":["module.vpc.vpc_sg_id","module.vpc"]}},"module":{"outputs":{"arn":{"expression":{"references":["aws_instance.this[0].arn","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].arn","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The ARN of the instance"},"capacity_reservation_specification":{"expression":{"references":["aws_instance.this[0].capacity_reservation_specification","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].capacity_reservation_specification","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"Capacity reservation specification of the instance"},"id":{"expression":{"references":["aws_instance.this[0].id","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].id","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The ID of the instance"},"instance_state":{"expression":{"references":["aws_instance.this[0].instance_state","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].instance_state","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The state of the instance. One of: `pending`, `running`, `shutting-down`, `terminated`, `stopping`, `stopped`"},"ipv6_addresses":{"expression":{"references":["aws_instance.this[0].ipv6_addresses","aws_instance.this[0]","aws_instance.this"]},"description":"The IPv6 address assigned to the instance, if applicable."},"outpost_arn":{"expression":{"references":["aws_instance.this[0].outpost_arn","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].outpost_arn","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The ARN of the Outpost the instance is assigned to"},"password_data":{"expression":{"references":["aws_instance.this[0].password_data","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].password_data","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"Base-64 encoded encrypted password data for the instance. Useful for getting the administrator password for instances running Microsoft Windows. This attribute is only exported if `get_password_data` is true"},"primary_network_interface_id":{"expression":{"references":["aws_instance.this[0].primary_network_interface_id","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].primary_network_interface_id","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The ID of the instance's primary network interface"},"private_dns":{"expression":{"references":["aws_instance.this[0].private_dns","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].private_dns","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The private DNS name assigned to the instance. Can only be used inside the Amazon EC2, and only available if you've enabled DNS hostnames for your VPC"},"private_ip":{"expression":{"references":["aws_instance.this[0].private_ip","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].private_ip","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The private IP address assigned to the instance."},"public_dns":{"expression":{"references":["aws_instance.this[0].public_dns","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].public_dns","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The public DNS name assigned to the instance. For EC2-VPC, this is only available if you've enabled DNS hostnames for your VPC"},"public_ip":{"expression":{"references":["aws_instance.this[0].public_ip","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].public_ip","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The public IP address assigned to the instance, if applicable. NOTE: If you are using an aws_eip with your instance, you should refer to the EIP's address directly and not use `public_ip` as this field will change after the EIP is attached"},"spot_bid_status":{"expression":{"references":["aws_spot_instance_request.this[0].spot_bid_status","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The current bid status of the Spot Instance Request"},"spot_instance_id":{"expression":{"references":["aws_spot_instance_request.this[0].spot_instance_id","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The Instance ID (if any) that is currently fulfilling the Spot Instance request"},"spot_request_state":{"expression":{"references":["aws_spot_instance_request.this[0].spot_request_state","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The current request state of the Spot Instance Request"},"tags_all":{"expression":{"references":["aws_instance.this[0].tags_all","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].tags_all","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"A map of tags assigned to the resource, including those inherited from the provider default_tags configuration block"}},"resources":[{"address":"aws_instance.this","mode":"managed","type":"aws_instance","name":"this","provider_config_key":"aws","expressions":{"ami":{"references":["var.ami"]},"associate_public_ip_address":{"references":["var.associate_public_ip_address"]},"availability_zone":{"references":["var.availability_zone"]},"cpu_core_count":{"references":["var.cpu_core_count"]},"cpu_threads_per_core":{"references":["var.cpu_threads_per_core"]},"credit_specification":[{"cpu_credits":{"references":["local.is_t_instance_type","var.cpu_credits"]}}],"disable_api_termination":{"references":["var.disable_api_termination"]},"ebs_optimized":{"references":["var.ebs_optimized"]},"enclave_options":[{"enabled":{"references":["var.enclave_options_enabled"]}}],"get_password_data":{"references":["var.get_password_data"]},"hibernation":{"references":["var.hibernation"]},"host_id":{"references":["var.host_id"]},"iam_instance_profile":{"references":["var.iam_instance_profile"]},"instance_initiated_shutdown_behavior":{"references":["var.instance_initiated_shutdown_behavior"]},"instance_type":{"references":["var.instance_type"]},"ipv6_address_count":{"references":["var.ipv6_address_count"]},"ipv6_addresses":{"references":["var.ipv6_addresses"]},"key_name":{"references":["var.key_name"]},"monitoring":{"references":["var.monitoring"]},"placement_group":{"references":["var.placement_group"]},"private_ip":{"references":["var.private_ip"]},"secondary_private_ips":{"references":["var.secondary_private_ips"]},"source_dest_check":{"references":["var.network_interface","var.source_dest_check"]},"subnet_id":{"references":["var.subnet_id"]},"tags":{"references":["var.name","var.tags"]},"tenancy":{"references":["var.tenancy"]},"timeouts":{"create":{"references":["var.timeouts"]},"delete":{"references":["var.timeouts"]},"update":{"references":["var.timeouts"]}},"user_data":{"references":["var.user_data"]},"user_data_base64":{"references":["var.user_data_base64"]},"user_data_replace_on_change":{"references":["var.user_data_replace_on_change"]},"volume_tags":{"references":["var.enable_volume_tags","var.name","var.volume_tags"]},"vpc_security_group_ids":{"references":["var.vpc_security_group_ids"]}},"schema_version":1,"count_expression":{"references":["local.create","var.create_spot_instance"]}},{"address":"aws_spot_instance_request.this","mode":"managed","type":"aws_spot_instance_request","name":"this","provider_config_key":"aws","expressions":{"ami":{"references":["var.ami"]},"associate_public_ip_address":{"references":["var.associate_public_ip_address"]},"availability_zone":{"references":["var.availability_zone"]},"block_duration_minutes":{"references":["var.spot_block_duration_minutes"]},"cpu_core_count":{"references":["var.cpu_core_count"]},"cpu_threads_per_core":{"references":["var.cpu_threads_per_core"]},"credit_specification":[{"cpu_credits":{"references":["local.is_t_instance_type","var.cpu_credits"]}}],"disable_api_termination":{"references":["var.disable_api_termination"]},"ebs_optimized":{"references":["var.ebs_optimized"]},"enclave_options":[{"enabled":{"references":["var.enclave_options_enabled"]}}],"get_password_data":{"references":["var.get_password_data"]},"hibernation":{"references":["var.hibernation"]},"host_id":{"references":["var.host_id"]},"iam_instance_profile":{"references":["var.iam_instance_profile"]},"instance_initiated_shutdown_behavior":{"references":["var.instance_initiated_shutdown_behavior"]},"instance_interruption_behavior":{"references":["var.spot_instance_interruption_behavior"]},"instance_type":{"references":["var.instance_type"]},"ipv6_address_count":{"references":["var.ipv6_address_count"]},"ipv6_addresses":{"references":["var.ipv6_addresses"]},"key_name":{"references":["var.key_name"]},"launch_group":{"references":["var.spot_launch_group"]},"monitoring":{"references":["var.monitoring"]},"placement_group":{"references":["var.placement_group"]},"private_ip":{"references":["var.private_ip"]},"secondary_private_ips":{"references":["var.secondary_private_ips"]},"source_dest_check":{"references":["var.network_interface","var.source_dest_check"]},"spot_price":{"references":["var.spot_price"]},"spot_type":{"references":["var.spot_type"]},"subnet_id":{"references":["var.subnet_id"]},"tags":{"references":["var.name","var.tags"]},"tenancy":{"references":["var.tenancy"]},"timeouts":{"create":{"references":["var.timeouts"]},"delete":{"references":["var.timeouts"]}},"user_data":{"references":["var.user_data"]},"user_data_base64":{"references":["var.user_data_base64"]},"user_data_replace_on_change":{"references":["var.user_data_replace_on_change"]},"valid_from":{"references":["var.spot_valid_from"]},"valid_until":{"references":["var.spot_valid_until"]},"volume_tags":{"references":["var.enable_volume_tags","var.name","var.volume_tags"]},"vpc_security_group_ids":{"references":["var.vpc_security_group_ids"]},"wait_for_fulfillment":{"references":["var.spot_wait_for_fulfillment"]}},"schema_version":0,"count_expression":{"references":["local.create","var.create_spot_instance"]}}],"variables":{"ami":{"default":"","description":"ID of AMI to use for the instance"},"associate_public_ip_address":{"default":null,"description":"Whether to associate a public IP address with an instance in a VPC"},"availability_zone":{"default":null,"description":"AZ to start the instance in"},"capacity_reservation_specification":{"default":null,"description":"Describes an instance's Capacity Reservation targeting option"},"cpu_core_count":{"default":null,"description":"Sets the number of CPU cores for an instance."},"cpu_credits":{"default":null,"description":"The credit option for CPU usage (unlimited or standard)"},"cpu_threads_per_core":{"default":null,"description":"Sets the number of CPU threads per core for an instance (has no effect unless cpu_core_count is also set)."},"create":{"default":true,"description":"Whether to create an instance"},"create_spot_instance":{"default":false,"description":"Depicts if the instance is a spot instance"},"disable_api_termination":{"default":null,"description":"If true, enables EC2 Instance Termination Protection"},"ebs_block_device":{"default":[],"description":"Additional EBS block devices to attach to the instance"},"ebs_optimized":{"default":null,"description":"If true, the launched EC2 instance will be EBS-optimized"},"enable_volume_tags":{"default":true,"description":"Whether to enable volume tags (if enabled it conflicts with root_block_device tags)"},"enclave_options_enabled":{"default":null,"description":"Whether Nitro Enclaves will be enabled on the instance. Defaults to `false`"},"ephemeral_block_device":{"default":[],"description":"Customize Ephemeral (also known as Instance Store) volumes on the instance"},"get_password_data":{"default":null,"description":"If true, wait for password data to become available and retrieve it."},"hibernation":{"default":null,"description":"If true, the launched EC2 instance will support hibernation"},"host_id":{"default":null,"description":"ID of a dedicated host that the instance will be assigned to. Use when an instance is to be launched on a specific dedicated host"},"iam_instance_profile":{"default":null,"description":"IAM Instance Profile to launch the instance with. Specified as the name of the Instance Profile"},"instance_initiated_shutdown_behavior":{"default":null,"description":"Shutdown behavior for the instance. Amazon defaults this to stop for EBS-backed instances and terminate for instance-store instances. Cannot be set on instance-store instance"},"instance_type":{"default":"t3.micro","description":"The type of instance to start"},"ipv6_address_count":{"default":null,"description":"A number of IPv6 addresses to associate with the primary network interface. Amazon EC2 chooses the IPv6 addresses from the range of your subnet"},"ipv6_addresses":{"default":null,"description":"Specify one or more IPv6 addresses from the range of the subnet to associate with the primary network interface"},"key_name":{"default":null,"description":"Key name of the Key Pair to use for the instance; which can be managed using the `aws_key_pair` resource"},"launch_template":{"default":null,"description":"Specifies a Launch Template to configure the instance. Parameters configured on this resource will override the corresponding parameters in the Launch Template"},"metadata_options":{"default":{},"description":"Customize the metadata options of the instance"},"monitoring":{"default":false,"description":"If true, the launched EC2 instance will have detailed monitoring enabled"},"name":{"default":"","description":"Name to be used on EC2 instance created"},"network_interface":{"default":[],"description":"Customize network interfaces to be attached at instance boot time"},"placement_group":{"default":null,"description":"The Placement Group to start the instance in"},"private_ip":{"default":null,"description":"Private IP address to associate with the instance in a VPC"},"putin_khuylo":{"default":true,"description":"Do you agree that Putin doesn't respect Ukrainian sovereignty and territorial integrity? More info: https://en.wikipedia.org/wiki/Putin_khuylo!"},"root_block_device":{"default":[],"description":"Customize details about the root block device of the instance. See Block Devices below for details"},"secondary_private_ips":{"default":null,"description":"A list of secondary private IPv4 addresses to assign to the instance's primary network interface (eth0) in a VPC. Can only be assigned to the primary network interface (eth0) attached at instance creation, not a pre-existing network interface i.e. referenced in a `network_interface block`"},"source_dest_check":{"default":true,"description":"Controls if traffic is routed to the instance when the destination address does not match the instance. Used for NAT or VPNs."},"spot_block_duration_minutes":{"default":null,"description":"The required duration for the Spot instances, in minutes. This value must be a multiple of 60 (60, 120, 180, 240, 300, or 360)"},"spot_instance_interruption_behavior":{"default":null,"description":"Indicates Spot instance behavior when it is interrupted. Valid values are `terminate`, `stop`, or `hibernate`"},"spot_launch_group":{"default":null,"description":"A launch group is a group of spot instances that launch together and terminate together. If left empty instances are launched and terminated individually"},"spot_price":{"default":null,"description":"The maximum price to request on the spot market. Defaults to on-demand price"},"spot_type":{"default":null,"description":"If set to one-time, after the instance is terminated, the spot request will be closed. Default `persistent`"},"spot_valid_from":{"default":null,"description":"The start date and time of the request, in UTC RFC3339 format(for example, YYYY-MM-DDTHH:MM:SSZ)"},"spot_valid_until":{"default":null,"description":"The end date and time of the request, in UTC RFC3339 format(for example, YYYY-MM-DDTHH:MM:SSZ)"},"spot_wait_for_fulfillment":{"default":null,"description":"If set, Terraform will wait for the Spot Request to be fulfilled, and will throw an error if the timeout of 10m is reached"},"subnet_id":{"default":null,"description":"The VPC Subnet ID to launch in"},"tags":{"default":{},"description":"A mapping of tags to assign to the resource"},"tenancy":{"default":null,"description":"The tenancy of the instance (if the instance is running in a VPC). Available values: default, dedicated, host."},"timeouts":{"default":{},"description":"Define maximum timeout for creating, updating, and deleting EC2 instance resources"},"user_data":{"default":null,"description":"The user data to provide when launching the instance. Do not pass gzip-compressed data via this argument; see user_data_base64 instead."},"user_data_base64":{"default":null,"description":"Can be used instead of user_data to pass base64-encoded binary data directly. Use this instead of user_data whenever the value is not a valid UTF-8 string. For example, gzip-encoded user data must be base64-encoded and passed via this argument to avoid corruption."},"user_data_replace_on_change":{"default":false,"description":"When used in combination with user_data or user_data_base64 will trigger a destroy and recreate when set to true. Defaults to false if not set."},"volume_tags":{"default":{},"description":"A mapping of tags to assign to the devices created by the instance at launch time"},"vpc_security_group_ids":{"default":null,"description":"A list of security group IDs to associate with"}}}},"storage":{"source":"./modules/storage","expressions":{"acl":{"references":["var.s3_acl"]},"db_password":{"constant_value":"supersecret"},"db_username":{"constant_value":"snyk"},"environment":{"references":["var.env"]},"private_subnet":{"references":["module.subnet.subnet_id_main","module.subnet","module.subnet.subnet_id_secondary","module.subnet"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"resources":[{"address":"aws_db_instance.snyk_db","mode":"managed","type":"aws_db_instance","name":"snyk_db","provider_config_key":"aws","expressions":{"allocated_storage":{"constant_value":20},"db_subnet_group_name":{"references":["aws_db_subnet_group.snyk_rds_subnet_grp.id","aws_db_subnet_group.snyk_rds_subnet_grp"]},"engine":{"constant_value":"postgres"},"engine_version":{"constant_value":"10.20"},"final_snapshot_identifier":{"references":["var.environment"]},"identifier":{"references":["var.environment"]},"instance_class":{"constant_value":"db.t3.micro"},"kms_key_id":{"references":["aws_kms_key.snyk_db_kms_key.arn","aws_kms_key.snyk_db_kms_key"]},"name":{"references":["var.environment"]},"password":{"references":["var.db_password"]},"skip_final_snapshot":{"constant_value":true},"storage_encrypted":{"constant_value":true},"storage_type":{"constant_value":"gp2"},"tags":{"references":["var.default_tags","var.environment"]},"username":{"references":["var.db_username"]},"vpc_security_group_ids":{"references":["aws_security_group.snyk_rds_sg.id","aws_security_group.snyk_rds_sg"]}},"schema_version":1},{"address":"aws_db_subnet_group.snyk_rds_subnet_grp","mode":"managed","type":"aws_db_subnet_group","name":"snyk_rds_subnet_grp","provider_config_key":"aws","expressions":{"name":{"references":["var.environment"]},"subnet_ids":{"references":["var.private_subnet"]},"tags":{"references":["var.default_tags","var.environment"]}},"schema_version":0},{"address":"aws_kms_key.snyk_db_kms_key","mode":"managed","type":"aws_kms_key","name":"snyk_db_kms_key","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"constant_value":10},"description":{"references":["var.environment"]},"enable_key_rotation":{"constant_value":true},"tags":{"references":["var.default_tags","var.environment"]}},"schema_version":0},{"address":"aws_s3_bucket.my-new-undeployed-bucket","mode":"managed","type":"aws_s3_bucket","name":"my-new-undeployed-bucket","provider_config_key":"aws","expressions":{"bucket":{"references":["var.environment"]}},"schema_version":0},{"address":"aws_s3_bucket.snyk_storage","mode":"managed","type":"aws_s3_bucket","name":"snyk_storage","provider_config_key":"aws","expressions":{"bucket":{"references":["var.environment"]},"tags":{"references":["var.default_tags","var.environment"]}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.snyk_private","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"snyk_private","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.snyk_storage.id","aws_s3_bucket.snyk_storage"]},"ignore_public_acls":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.snyk_public","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"snyk_public","provider_config_key":"aws","expressions":{"block_public_acls":{"references":["var.public_var_test"]},"block_public_policy":{"references":["var.public_var_test"]},"bucket":{"references":["aws_s3_bucket.my-new-undeployed-bucket.id","aws_s3_bucket.my-new-undeployed-bucket"]},"ignore_public_acls":{"references":["var.public_var_test"]}},"schema_version":0},{"address":"aws_security_group.snyk_rds_sg","mode":"managed","type":"aws_security_group","name":"snyk_rds_sg","provider_config_key":"aws","expressions":{"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":5432,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":5432}]},"name":{"constant_value":"snyk_rds_sg"},"tags":{"references":["var.default_tags","var.environment"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_ssm_parameter.snyk_ssm_db_host","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_host","provider_config_key":"aws","expressions":{"description":{"constant_value":"Snyk Database"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.snyk_db.endpoint","aws_db_instance.snyk_db"]}},"schema_version":0},{"address":"aws_ssm_parameter.snyk_ssm_db_name","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_name","provider_config_key":"aws","expressions":{"description":{"constant_value":"Snyk Database Name"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags","var.environment"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.snyk_db.name","aws_db_instance.snyk_db"]}},"schema_version":0},{"address":"aws_ssm_parameter.snyk_ssm_db_password","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_password","provider_config_key":"aws","expressions":{"description":{"constant_value":"Snyk Database Password"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.snyk_db.password","aws_db_instance.snyk_db"]}},"schema_version":0},{"address":"aws_ssm_parameter.snyk_ssm_db_user","mode":"managed","type":"aws_ssm_parameter","name":"snyk_ssm_db_user","provider_config_key":"aws","expressions":{"description":{"constant_value":"Snyk Database Username"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.snyk_db.username","aws_db_instance.snyk_db"]}},"schema_version":0}],"variables":{"acl":{},"db_password":{},"db_username":{},"default_tags":{"default":{},"description":"default tags to resources"},"environment":{"description":"the type of environment (dev,staging/prod)"},"private_subnet":{},"public_var_test":{"default":false,"description":"test value for publicly accessible s3"},"vpc_id":{}}}},"subnet":{"source":"./modules/subnet","expressions":{"region":{"references":["var.region"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"outputs":{"subnet_id_main":{"expression":{"references":["aws_subnet.main.id","aws_subnet.main"]}},"subnet_id_secondary":{"expression":{"references":["aws_subnet.secondary.id","aws_subnet.secondary"]}}},"resources":[{"address":"aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"references":["var.cidr_main"]},"tags":{"constant_value":{"Name":"Main"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_subnet.secondary","mode":"managed","type":"aws_subnet","name":"secondary","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"references":["var.cidr_secondary"]},"tags":{"constant_value":{"Name":"Main"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1}],"variables":{"cidr_main":{"default":"10.0.0.0/24"},"cidr_secondary":{"default":"10.0.64.0/19"},"region":{},"vpc_id":{}}}},"vpc":{"source":"./modules/vpc","module":{"outputs":{"vpc_id":{"expression":{"references":["aws_vpc.example.id","aws_vpc.example"]}},"vpc_sg_id":{"expression":{"references":["aws_default_security_group.default.id","aws_default_security_group.default"]}}},"resources":[{"address":"aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_config_key":"aws","expressions":{"ingress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"vpc_id":{"references":["aws_vpc.example.id","aws_vpc.example"]}},"schema_version":1},{"address":"aws_security_group.allow_ssh","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow SSH inbound from anywhere"},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22}]},"name":{"constant_value":"allow_ssh"},"vpc_id":{"references":["aws_vpc.example.id","aws_vpc.example"]}},"schema_version":1},{"address":"aws_security_group.allow_ssh_with_valid_cidr","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow SSH inbound from specific range"},"ingress":{"references":["var.cidr"]},"name":{"constant_value":"allow_ssh_with_valid_cidr"},"vpc_id":{"references":["aws_vpc.example.id","aws_vpc.example"]}},"schema_version":1},{"address":"aws_vpc.example","mode":"managed","type":"aws_vpc","name":"example","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.cidr"]}},"schema_version":1}],"variables":{"cidr":{"default":"10.0.0.0/16"}}}}},"variables":{"access_key":{},"ami":{"default":"ami-07336266b2c69c546","description":"ami used for ec2 instance. example - ami-07336266b2c69c546 (terraform-goof-example-ami)"},"env":{"default":"masa-demo"},"region":{"default":"us-west-1"},"s3_acl":{"default":"public-read-write"},"secret_key":{}}}},"relevant_attributes":[{"resource":"module.storage.aws_db_subnet_group.snyk_rds_subnet_grp","attribute":["id"]},{"resource":"module.vpc.aws_default_security_group.default","attribute":["id"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["public_ip"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["primary_network_interface_id"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["capacity_reservation_specification"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["capacity_reservation_specification"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["private_dns"]},{"resource":"module.vpc.aws_vpc.example","attribute":["id"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["spot_request_state"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["spot_bid_status"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["private_ip"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["instance_state"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["password_data"]},{"resource":"module.iam.data.aws_iam_policy_document.admin-assume-role-policy","attribute":["json"]},{"resource":"module.storage.aws_db_instance.snyk_db","attribute":["username"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["id"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["ipv6_addresses"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["password_data"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["outpost_arn"]},{"resource":"module.storage.aws_s3_bucket.my-new-undeployed-bucket","attribute":["id"]},{"resource":"module.storage.aws_db_instance.snyk_db","attribute":["name"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["arn"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["tags_all"]},{"resource":"module.storage.aws_kms_key.snyk_db_kms_key","attribute":["arn"]},{"resource":"module.subnet.aws_subnet.secondary","attribute":["id"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["public_ip"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["public_dns"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["tags_all"]},{"resource":"module.storage.aws_s3_bucket.snyk_storage","attribute":["id"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["spot_instance_id"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["primary_network_interface_id"]},{"resource":"module.storage.aws_db_instance.snyk_db","attribute":["endpoint"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["private_ip"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["instance_state"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["arn"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["private_dns"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["public_dns"]},{"resource":"module.subnet.aws_subnet.main","attribute":["id"]},{"resource":"module.storage.aws_db_instance.snyk_db","attribute":["password"]},{"resource":"module.instance.aws_instance.this[0]","attribute":["id"]},{"resource":"module.instance.aws_spot_instance_request.this[0]","attribute":["outpost_arn"]},{"resource":"module.storage.aws_security_group.snyk_rds_sg","attribute":["id"]}]}
